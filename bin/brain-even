#!/usr/bin/env php

<?php

require_once __DIR__ . '/../vendor/autoload.php';

use function BrainGames\Engine\greet;
use function BrainGames\Engine\askQuestion;
use function BrainGames\Engine\lose;
use function BrainGames\Engine\correct;
use function BrainGames\Engine\congratulate;
use function BrainGames\Engine\describeGame;

use function BrainGames\Games\Even\gameDescription;
use function BrainGames\Games\Even\gameName;
use function BrainGames\Games\Even\createQuestionAndAnswer;

// Описываем игровой процесс
$name = greet('Brain Games');
describeGame(gameDescription());

$correctAnswers = 0;

while ($correctAnswers < 3) {
    ['question' => $question, 'answer' => $answer] = createQuestionAndAnswer();
    $userAnswer = askQuestion($question);
    if ($userAnswer !== $answer) {
        lose($userAnswer, $answer, $name);
        exit;
    } else {
        correct();
        $correctAnswers++;
    }
}
congratulate($name);